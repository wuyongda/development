<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../plugin/layui/css/layui.css"/>
	</head>
	<body class="layui-layout-body">
		<div class="layui-layout layui-layout-admin">
			<div class="layui-header">
    			<div class="layui-logo">layui 后台布局</div>
    			<!-- 头部区域（可配合layui已有的水平导航） -->
			    <ul class="layui-nav layui-layout-right">
			    	<li class="layui-nav-item">
			        <a href="javascript:;">
			          	<img src="http://t.cn/RCzsdCq" class="layui-nav-img">
			          	贤心
			        </a>
			        <dl class="layui-nav-child">
			          	<dd><a href="">基本资料</a></dd>
			          	<dd><a href="">安全设置</a></dd>
			        </dl>
			      	</li>
			      	<li class="layui-nav-item"><a href="">退了</a></li>
			    </ul>
  			</div>
  			<div class="layui-side layui-bg-black">
    			<div class="layui-side-scroll">
			      <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
			      <ul id="menus" class="layui-nav layui-nav-tree"  lay-filter="test">
			      </ul>
			    </div>
  			</div>
  
  			<div class="layui-body" style="overflow: hidden;">
    			<!-- 内容主体区域 -->
    			<!--<div style="padding: 15px;">内容主体区域</div>-->
    			<iframe id="content-iframe" src="" width="100%" height="99.5%" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="yes"></iframe>
  			</div>
  
		</div>
		<script src="../plugin/jquery-3.3.1.min.js" type="text/javascript"></script>
		<script src="../plugin/layui/layui.all.js" type="text/javascript" charset="utf-8"></script>
		<script>
			$(function(){
				$.ajax({
					type: "get",
					url: 'http://localhost:8080/sysMenu/tree',
					async: true,
					success: function(data) {
						if(data.code == "0000") {
							$.each(data.data, function(index, menu) {
								var node = menu.node;
								var li = $('<li class="layui-nav-item layui-nav-itemed"></li>').appendTo($("#menus"));
								if(node.type == 1) {
									var a = $('<a href="">'+ node.name +'</a>').appendTo(li);
								} else {
									var a = $('<a href="javascript:;">'+ node.name +'</a>').appendTo(li);
									var dl = $('<dl class="layui-nav-child"></dl>').appendTo(li);
									$.each(menu.children, function(i, item){
										var childrenNode = item.node;
										var dd = $('<dd><a href="javascript:;" onclick="showPage(\''+childrenNode.url+'\')">'+ childrenNode.name +'</a></dd>').appendTo(dl);
									})
								}
							});
						}
						/**
						 * 重新渲染左侧导航菜单
						 */
						var element = layui.element;
						element.render("nav");
					}
				})
			})
			
			function showPage(url) {
				$("#content-iframe").attr("src", url);
			}
			
			var menus=[{
	            	id: 1,
	            	icon: "ios-navigate",
	            	name: "基本信息",
	            	too: "user",
	            	children:[{
	            		icon: "ios-navigate",
	            		name:"用户信息",
	            		url:"customer/customer.html"
	            	},{
	            		id: 11,
	            		icon: "ios-navigate",
	            		name:"组织结构",
	            		url:"org/org.html"
	            	},{
	            		id: 12,
	            		icon: "ios-navigate",
	            		name:"目录1-2",
	            		url:"https://www.163.com"
	            	},{
	            		icon: "ios-navigate",
	            		name:"目录1-3"
	            	}]
	            },{
	            	icon: "ios-keypad",
	            	name:"系统管理",
	            	children:[{
	            		icon: "ios-navigate",
	            		url:"sysmenu/menu.html",
	            		name:"菜单管理"
	            	},{
	            		icon: "ios-navigate",
	            		name:"挂账"
	            	}]
	            }]
			//JavaScript代码区域
			/*layui.use('element', function(){
			  var element = layui.element;
			  
			});*/
		</script>
	</body>
</html>
